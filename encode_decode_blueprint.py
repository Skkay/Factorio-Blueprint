import zlib
import base64

def decode_blueprint(bp_string):
	decoded_data = base64.b64decode(bp_string[1:])
	return zlib.decompress(decoded_data)

def encode_blueprint(bp_json):
	zlibbed_str = zlib.compress(bytes(bp_json, "utf-8"), 9)
	return bytes("0", "utf-8") + base64.b64encode(zlibbed_str) 


bp_base64 = "0eNqlme1u6jAMhu8lv8uU77bcytGECoumSCWt2nQaQr33k4L2oYHbxPkFFPLYcezXSbiSYzuZfrDOk/2V2FPnRrL/dyWjfXdNuzzzl96QPfmwg5/Ck4K45rw8uP9iV5G5INa9mU+yZ3OBHMnn14IY56235u7A7cPl4Kbz0QwB/T3afPaDGcedHxo39t3gd0fT+kDvuzEM79xiOiB3/EUV5BLeqBc1L579QfJ0pNhAinQk3UDKdCTbQKpk5BZRJxO3pl0mE7fWpkombiVQnZFA4jmS0QfmFCpkeB+68LqZ6Qu1+Kq7bvL95MkzK4/VNPat9T58+cTnO1sCHvMUFltnCczsaersc0oKWjeVEIWNIGhEEJJjUOI1AApBhS9ZCFkjQpFaDJwmLN16LXCWoQgcYOa0KQYwRUYFQH7KjN7Hb0v1Zgdzun+vn1lQWerA/trg38lhHZQbOiNQjwafWSjxrTMuahW+0qGlrtPFDshEQfGiAXgnGB4JeclzdGgl8WBVEiKj7CkwDYlnQkiVs1+hDwkcExlMf/ypShrXFUSZIWc0pvJFhbcArUaNr3UAKWnGbmRlfUHJlQw9Bxqjh5LjBReKkUArDkSU+MNKXBQUXiTjDGj8gT2qccoSL2ZxBiq8AaA1yTpHLflv5QLrR1G8rADtTzH8Ligq1Irn7Owi4yJy2kakDYnWLij0+LsaIAdVzvEyMgz4yxsoDPizJRSGnKNlXBg0xQsIcCDWSRc3fBXF0++AgGOvFgkouuqUTL9MgpxKuZFZj5ROPu5APuELA/KtSr68gHyr8Q0busPNKAAIyfDdDUJyfHeDkAKt2hBRonetEBG/A4SIGr1pvRFfC2K9OYfhP/9JFaRtwtDwrDpUh2PTNu50S+0PM4z3/UTFZCnrUpeMaqXn+T8F/u0O"
print(decode_blueprint(bp_base64))

bp_json = '{"blueprint":{"icons":[{"signal":{"type":"virtual","name":"signal-8"},"index":1},{"signal":{"type":"virtual","name":"signal-8"},"index":2}],"entities":[{"entity_number":1,"name":"express-transport-belt","position":{"x":-2.5,"y":-5.5}},{"entity_number":2,"name":"express-transport-belt","position":{"x":-3.5,"y":-5.5}},{"entity_number":3,"name":"express-transport-belt","position":{"x":-0.5,"y":-5.5}},{"entity_number":4,"name":"express-transport-belt","position":{"x":-1.5,"y":-5.5}},{"entity_number":5,"name":"express-transport-belt","position":{"x":1.5,"y":-5.5}},{"entity_number":6,"name":"express-transport-belt","position":{"x":0.5,"y":-5.5}},{"entity_number":7,"name":"express-transport-belt","position":{"x":3.5,"y":-5.5}},{"entity_number":8,"name":"express-transport-belt","position":{"x":2.5,"y":-5.5}},{"entity_number":9,"name":"express-transport-belt","position":{"x":-3.5,"y":-3.5}},{"entity_number":10,"name":"express-underground-belt","position":{"x":-2.5,"y":-3.5},"type":"output"},{"entity_number":11,"name":"express-splitter","position":{"x":-3,"y":-4.5}},{"entity_number":12,"name":"express-splitter","position":{"x":-1,"y":-4.5}},{"entity_number":13,"name":"express-underground-belt","position":{"x":-0.5,"y":-3.5},"type":"output"},{"entity_number":14,"name":"express-transport-belt","position":{"x":-1.5,"y":-3.5}},{"entity_number":15,"name":"express-splitter","position":{"x":1,"y":-4.5}},{"entity_number":16,"name":"express-underground-belt","position":{"x":0.5,"y":-3.5},"type":"output"},{"entity_number":17,"name":"express-transport-belt","position":{"x":1.5,"y":-3.5}},{"entity_number":18,"name":"express-transport-belt","position":{"x":3.5,"y":-3.5}},{"entity_number":19,"name":"express-underground-belt","position":{"x":2.5,"y":-3.5},"type":"output"},{"entity_number":20,"name":"express-splitter","position":{"x":3,"y":-4.5}},{"entity_number":21,"name":"express-transport-belt","position":{"x":-3.5,"y":-2.5}},{"entity_number":22,"name":"express-transport-belt","position":{"x":-3.5,"y":-1.5}},{"entity_number":23,"name":"express-transport-belt","position":{"x":-1.5,"y":-2.5}},{"entity_number":24,"name":"express-transport-belt","position":{"x":-0.5,"y":-2.5},"direction":6},{"entity_number":25,"name":"express-underground-belt","position":{"x":-0.5,"y":-1.5},"direction":2,"type":"input"},{"entity_number":26,"name":"express-transport-belt","position":{"x":-1.5,"y":-1.5},"direction":2},{"entity_number":27,"name":"express-transport-belt","position":{"x":0.5,"y":-2.5},"direction":6},{"entity_number":28,"name":"express-transport-belt","position":{"x":1.5,"y":-2.5}},{"entity_number":29,"name":"express-splitter","position":{"x":1,"y":-1.5}},{"entity_number":30,"name":"express-transport-belt","position":{"x":3.5,"y":-2.5}},{"entity_number":31,"name":"express-transport-belt","position":{"x":3.5,"y":-1.5}},{"entity_number":32,"name":"express-underground-belt","position":{"x":2.5,"y":-1.5},"direction":2,"type":"output"},{"entity_number":33,"name":"express-transport-belt","position":{"x":-3.5,"y":-0.5}},{"entity_number":34,"name":"express-transport-belt","position":{"x":-3.5,"y":0.5}},{"entity_number":35,"name":"express-underground-belt","position":{"x":-2.5,"y":0.5},"direction":6,"type":"output"},{"entity_number":36,"name":"express-underground-belt","position":{"x":-1.5,"y":-0.5},"type":"output"},{"entity_number":37,"name":"express-transport-belt","position":{"x":-0.5,"y":-0.5},"direction":2},{"entity_number":38,"name":"express-transport-belt","position":{"x":-0.5,"y":0.5}},{"entity_number":39,"name":"express-transport-belt","position":{"x":1.5,"y":-0.5}},{"entity_number":40,"name":"express-underground-belt","position":{"x":0.5,"y":0.5},"direction":6,"type":"input"},{"entity_number":41,"name":"express-transport-belt","position":{"x":1.5,"y":0.5},"direction":6},{"entity_number":42,"name":"express-transport-belt","position":{"x":0.5,"y":-0.5}},{"entity_number":43,"name":"express-transport-belt","position":{"x":3.5,"y":0.5}},{"entity_number":44,"name":"express-transport-belt","position":{"x":2.5,"y":-0.5},"direction":6},{"entity_number":45,"name":"express-transport-belt","position":{"x":3.5,"y":-0.5},"direction":6},{"entity_number":46,"name":"express-transport-belt","position":{"x":-2.5,"y":1.5},"direction":2},{"entity_number":47,"name":"express-transport-belt","position":{"x":-3.5,"y":1.5},"direction":2},{"entity_number":48,"name":"express-transport-belt","position":{"x":-3.5,"y":2.5}},{"entity_number":49,"name":"express-underground-belt","position":{"x":-2.5,"y":2.5},"type":"input"},{"entity_number":50,"name":"express-transport-belt","position":{"x":-0.5,"y":1.5}},{"entity_number":51,"name":"express-transport-belt","position":{"x":-1.5,"y":1.5},"direction":2},{"entity_number":52,"name":"express-underground-belt","position":{"x":-0.5,"y":2.5},"type":"input"},{"entity_number":53,"name":"express-underground-belt","position":{"x":-1.5,"y":2.5},"type":"input"},{"entity_number":54,"name":"express-transport-belt","position":{"x":1.5,"y":1.5}},{"entity_number":55,"name":"express-transport-belt","position":{"x":1.5,"y":2.5}},{"entity_number":56,"name":"express-underground-belt","position":{"x":0.5,"y":2.5},"type":"input"},{"entity_number":57,"name":"express-transport-belt","position":{"x":3.5,"y":1.5}},{"entity_number":58,"name":"express-transport-belt","position":{"x":3.5,"y":2.5}},{"entity_number":59,"name":"express-underground-belt","position":{"x":2.5,"y":2.5},"type":"input"},{"entity_number":60,"name":"express-transport-belt","position":{"x":-3.5,"y":3.5}},{"entity_number":61,"name":"express-splitter","position":{"x":-2,"y":3.5}},{"entity_number":62,"name":"express-splitter","position":{"x":-3,"y":4.5}},{"entity_number":63,"name":"express-splitter","position":{"x":0,"y":3.5}},{"entity_number":64,"name":"express-splitter","position":{"x":-1,"y":4.5}},{"entity_number":65,"name":"express-splitter","position":{"x":2,"y":3.5}},{"entity_number":66,"name":"express-splitter","position":{"x":1,"y":4.5}},{"entity_number":67,"name":"express-transport-belt","position":{"x":3.5,"y":3.5}},{"entity_number":68,"name":"express-splitter","position":{"x":3,"y":4.5}},{"entity_number":69,"name":"express-transport-belt","position":{"x":-2.5,"y":5.5}},{"entity_number":70,"name":"express-transport-belt","position":{"x":-3.5,"y":5.5}},{"entity_number":71,"name":"express-transport-belt","position":{"x":-0.5,"y":5.5}},{"entity_number":72,"name":"express-transport-belt","position":{"x":-1.5,"y":5.5}},{"entity_number":73,"name":"express-transport-belt","position":{"x":1.5,"y":5.5}},{"entity_number":74,"name":"express-transport-belt","position":{"x":0.5,"y":5.5}},{"entity_number":75,"name":"express-transport-belt","position":{"x":3.5,"y":5.5}},{"entity_number":76,"name":"express-transport-belt","position":{"x":2.5,"y":5.5}}],"item":"blueprint","label":"8_8_balancer","version":281474976710656}}'
print(encode_blueprint(bp_json))
